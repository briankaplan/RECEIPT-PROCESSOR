<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Receipt Discovery Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: #0a0d14;
            color: #ffffff;
            font-family: 'Inter', sans-serif;
            padding: 2rem;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #ff6b35, #ff8559);
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-weight: 600;
            margin: 1rem;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 107, 53, 0.3);
        }
        
        .feature-list {
            text-align: left;
            margin: 2rem 0;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
        }
        
        .feature-item {
            margin: 1rem 0;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border-left: 4px solid #ff6b35;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üîç Enhanced Receipt Discovery System</h1>
        <p class="lead">Real-time notifications with detailed receipt information and live counters</p>
        
        <div class="feature-list">
            <h3>‚ú® Features Included:</h3>
            <div class="feature-item">
                <strong>Real-time Counters:</strong> Live updates showing "Found receipt #1, #2, #3..." as they're discovered
            </div>
            <div class="feature-item">
                <strong>Detailed Notifications:</strong> Shows merchant name, amount, date, and confidence score for each receipt
            </div>
            <div class="feature-item">
                <strong>Live Discovery Feed:</strong> Real-time feed showing all discovered receipts with timestamps
            </div>
            <div class="feature-item">
                <strong>Progress Tracking:</strong> Visual progress bar and processing statistics
            </div>
            <div class="feature-item">
                <strong>Confidence Indicators:</strong> Color-coded confidence levels (High/Medium/Low) with percentage scores
            </div>
            <div class="feature-item">
                <strong>Animated Feedback:</strong> Smooth animations for each receipt discovery and counter updates
            </div>
        </div>
        
        <button class="btn btn-primary" onclick="startEnhancedReceiptDiscovery()">
            <i class="fas fa-search"></i>
            üîç Start Enhanced Receipt Discovery
        </button>
        
        <button class="btn btn-primary" onclick="testIndividualNotifications()">
            <i class="fas fa-bell"></i>
            üì¢ Test Individual Notifications
        </button>
        
        <div id="demo-info" style="margin-top: 2rem; padding: 1rem; background: rgba(255, 255, 255, 0.05); border-radius: 8px;">
            <h4>Demo Instructions:</h4>
            <p>Click the "Start Enhanced Receipt Discovery" button to see the full system in action. You'll see:</p>
            <ul style="text-align: left;">
                <li>Real-time receipt discovery notifications</li>
                <li>Live counter updates</li>
                <li>Detailed receipt information</li>
                <li>Confidence scores and merchant details</li>
                <li>Processing statistics</li>
            </ul>
        </div>
    </div>

    <script>
        // Enhanced Receipt Discovery System
        function startEnhancedReceiptDiscovery() {
            if (typeof notifications !== 'undefined' && notifications.simulateReceiptDiscovery) {
                notifications.simulateReceiptDiscovery();
            } else {
                // Fallback simulation
                simulateReceiptDiscoveries();
            }
        }

        // Simulate receipt discoveries for demo
        function simulateReceiptDiscoveries() {
            const merchants = ['Walmart', 'Target', 'Amazon', 'Starbucks', 'McDonald\'s', 'Home Depot', 'Best Buy', 'Costco'];
            const amounts = [45.67, 23.99, 156.78, 8.45, 12.99, 89.99, 299.99, 67.50];
            
            let discoveryCount = 0;
            const maxDiscoveries = 15;
            
            // Show initial notification
            showToast('üîç Starting enhanced receipt discovery simulation...', 'info');
            
            const discoveryInterval = setInterval(() => {
                if (discoveryCount >= maxDiscoveries) {
                    clearInterval(discoveryInterval);
                    showToast('‚úÖ Enhanced discovery simulation complete!', 'success');
                    return;
                }
                
                const merchant = merchants[Math.floor(Math.random() * merchants.length)];
                const amount = amounts[Math.floor(Math.random() * amounts.length)];
                const confidence = 0.7 + Math.random() * 0.3;
                
                // Show individual receipt discovery notification
                showToast(`üîç Found receipt #${discoveryCount + 1}: ${merchant} - $${amount.toFixed(2)} (${Math.round(confidence * 100)}% confidence)`, 'success');
                
                discoveryCount++;
            }, 800 + Math.random() * 1200);
        }

        // Test individual notifications
        function testIndividualNotifications() {
            const merchants = ['Walmart', 'Target', 'Amazon'];
            const amounts = [45.67, 23.99, 156.78];
            
            merchants.forEach((merchant, index) => {
                setTimeout(() => {
                    const amount = amounts[index];
                    const confidence = 0.7 + Math.random() * 0.3;
                    showToast(`üîç Found receipt #${index + 1}: ${merchant} - $${amount.toFixed(2)} (${Math.round(confidence * 100)}% confidence)`, 'success');
                }, index * 1000);
            });
        }

        // Simple toast notification system for demo
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `alert alert-${type === 'success' ? 'success' : type === 'error' ? 'danger' : 'info'}`;
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 9999;
                min-width: 300px;
                max-width: 400px;
                animation: slideInRight 0.3s ease-out;
            `;
            
            const icon = type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è';
            toast.innerHTML = `${icon} ${message}`;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideOutRight 0.3s ease-in forwards';
                setTimeout(() => toast.remove(), 300);
            }, 4000);
        }

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html> 